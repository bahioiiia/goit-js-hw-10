{"version":3,"file":"1-timer-b3a1af9e.js","sources":["../../src/js/1-timer.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nlet userSelectedDate;\nlet timerInterval;\nconst dateTimePicker = document.getElementById('datetime-picker');\nconst startButton = document.querySelector('button[data-start]');\nstartButton.disabled = true;\nconst timerFields = document.querySelectorAll('.timer .value');\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction updateTimer(days, hours, minutes, seconds) {\n  timerFields[0].textContent = addLeadingZero(days);\n  timerFields[1].textContent = addLeadingZero(hours);\n  timerFields[2].textContent = addLeadingZero(minutes);\n  timerFields[3].textContent = addLeadingZero(seconds);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = 60000;\n  const hour = 3600000;\n  const day = 86400000;\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  return { days, hours, minutes, seconds };\n}\n\nfunction startCountdown() {\n  const now = new Date().getTime();\n  const timeLeft = userSelectedDate.getTime() - now;\n\n  if (timeLeft <= 0) {\n    clearInterval(timerInterval);\n    updateTimer(0, 0, 0, 0);\n    iziToast.error({\n      title: 'Error',\n      message: 'Please choose a date in the future',\n    });\n    startButton.disabled = true;\n    dateTimePicker.disabled = false;\n    return;\n  }\n\n  const { days, hours, minutes, seconds } = convertMs(timeLeft);\n  updateTimer(days, hours, minutes, seconds);\n\n  if (timeLeft <= 1000) {\n    clearInterval(timerInterval);\n    iziToast.success({\n      title: 'Success',\n      message: 'Timer finished',\n    });\n    dateTimePicker.disabled = false;\n    startButton.disabled = false;\n  }\n}\n\nfunction handleDateSelection(selectedDates) {\n  userSelectedDate = selectedDates[0];\n\n  const now = new Date().getTime();\n  if (userSelectedDate.getTime() < now) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please choose a date in the future',\n    });\n    startButton.disabled = true;\n  } else {\n    startButton.disabled = false;\n  }\n}\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose: handleDateSelection,\n};\n\nflatpickr('#datetime-picker', options);\n\nstartButton.addEventListener('click', () => {\n  startButton.disabled = true;\n  dateTimePicker.disabled = true;\n/*   startCountdown(); */\n  timerInterval = setInterval(startCountdown, 1000);\n});\n\n\n/*\nБібліотека очікує, що її ініціалізують на елементі input[type=\"text\"], тому ми додали до HTML документа поле input#datetime-picker.\n\n<input type=\"text\" id=\"datetime-picker\" />\n\n\n\nДругим аргументом функції flatpickr(selector, options) можна передати необов'язковий об'єкт параметрів. Ми підготували для тебе об'єкт, який потрібен для виконання завдання. Розберися, за що відповідає кожна властивість у документації «Options» і використовуй його у своєму коді.\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n  },\n};\n\n\n\nВибір дати\n\n\n\nМетод onClose() з об'єкта параметрів викликається щоразу під час закриття елемента інтерфейсу, який створює flatpickr. Саме в ньому варто обробляти дату, обрану користувачем. Параметр selectedDates — це масив обраних дат, тому ми беремо перший елемент selectedDates[0].\n\n\n\nТобі ця обрана дата буде потрібна в коді і поза межами цього методу onClose(). Тому оголоси поза межами методу let змінну, наприклад, userSelectedDate, і після валідації її в методі onClose() на минуле/майбутнє запиши обрану дату в цю let змінну.\n\nЯкщо користувач вибрав дату в минулому, покажи window.alert() з текстом \"Please choose a date in the future\" і зроби кнопку «Start» не активною.\nЯкщо користувач вибрав валідну дату (в майбутньому), кнопка «Start» стає активною.\nКнопка «Start» повинна бути неактивною доти, доки користувач не вибрав дату в майбутньому. Зверни увагу, що при обранні валідної дати, не запуску таймера і обранні потім невалідної дати, кнопка після розблокування має знову стати неактивною.\nНатисканням на кнопку «Start» починається зворотний відлік часу до обраної дати з моменту натискання.\n\n\nВідлік часу\n\n\n\nНатисканням на кнопку «Start» скрипт повинен обчислювати раз на секунду, скільки часу залишилось до вказаної дати, і оновлювати інтерфейс таймера, показуючи чотири цифри: дні, години, хвилини і секунди у форматі xx:xx:xx:xx.\n\nКількість днів може складатися з більше, ніж двох цифр.\nТаймер повинен зупинятися, коли дійшов до кінцевої дати, тобто залишок часу дорівнює нулю 00:00:00:00.\n\n\nПісля запуску таймера натисканням кнопки Старт кнопка Старт і інпут стають неактивним, щоб користувач не міг обрати нову дату, поки йде відлік часу. Після зупинки таймера інпут стає активним, щоб користувач міг обрати наступну дату. Кнопка залишається не активною.\n\n\nДля підрахунку значень використовуй готову функцію convertMs, де ms — різниця між кінцевою і поточною датою в мілісекундах.\n\n\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n\n\n\nФорматування часу\n\n\n\nФункція convertMs() повертає об'єкт з розрахованим часом, що залишився до кінцевої дати. Зверни увагу, що вона не форматує результат.\nТобто якщо залишилося 4 хвилини або будь-якої іншої складової часу, то функція поверне 4, а не 04.\nВ інтерфейсі таймера необхідно додавати 0, якщо в числі менше двох символів.\nНапиши функцію, наприклад addLeadingZero(value), яка використовує метод рядка padStart() і перед відмальовуванням інтерфейсу форматує значення.\n\n\n\nБібліотека повідомлень\n\n\n\nДля відображення повідомлень користувачеві, замість window.alert(), використовуй бібліотеку iziToast.\nДля того щоб підключити CSS код бібліотеки в проєкт, необхідно додати ще один імпорт, крім того, що описаний у документації.\n\n\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\nНа що буде звертати увагу ментор при перевірці:\n\nПідключені бібліотеки flatpickr та iziToast.\nПри першому завантаженні сторінки кнопка Start не активна.\nПри кліку на інпут відкривається календар, де можна вибрати дату.\nПри обранні дати з минулого, кнопка Start стає неактивною і з’являється повідомлення з текстом \"Please choose a date in the future\".\nПри обранні дати з майбутнього кнопка Start стає активною.\nПри натисканні на кнопку Start вона стає неактивною, на сторінку виводиться час, що лишився до обраної дати у форматі xx:xx:xx:xx, і запускається зворотний відлік часу до обраної дати.\nКожну секунду оновлюється інтерфейс і показує оновлені дані часу, який залишився.\nТаймер зупиняється, коли доходить до кінцевої дати, тобто залишок часу дорівнює нулю і інтерфейс виглядає так 00:00:00:00.\nЧас в інтерфейсі відформатований і, якщо воно містить менше двох символів, на початку числа доданий 0. -->\n */"],"names":["userSelectedDate","timerInterval","dateTimePicker","startButton","timerFields","addLeadingZero","value","updateTimer","days","hours","minutes","seconds","convertMs","ms","startCountdown","now","timeLeft","iziToast","handleDateSelection","selectedDates","options","flatpickr"],"mappings":"gDAKA,IAAIA,EACAC,EACJ,MAAMC,EAAiB,SAAS,eAAe,iBAAiB,EAC1DC,EAAc,SAAS,cAAc,oBAAoB,EAC/DA,EAAY,SAAW,GACvB,MAAMC,EAAc,SAAS,iBAAiB,eAAe,EAE7D,SAASC,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASC,EAAYC,EAAMC,EAAOC,EAASC,EAAS,CAClDP,EAAY,CAAC,EAAE,YAAcC,EAAeG,CAAI,EAChDJ,EAAY,CAAC,EAAE,YAAcC,EAAeI,CAAK,EACjDL,EAAY,CAAC,EAAE,YAAcC,EAAeK,CAAO,EACnDN,EAAY,CAAC,EAAE,YAAcC,EAAeM,CAAO,CACrD,CAEA,SAASC,EAAUC,EAAI,CAKrB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAC1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EACpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EACjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,EAClE,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASG,GAAiB,CACxB,MAAMC,EAAM,IAAI,KAAM,EAAC,QAAO,EACxBC,EAAWhB,EAAiB,QAAO,EAAKe,EAE9C,GAAIC,GAAY,EAAG,CACjB,cAAcf,CAAa,EAC3BM,EAAY,EAAG,EAAG,EAAG,CAAC,EACtBU,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACf,CAAK,EACDd,EAAY,SAAW,GACvBD,EAAe,SAAW,GAC1B,MACD,CAED,KAAM,CAAE,KAAAM,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUI,CAAQ,EAC5DT,EAAYC,EAAMC,EAAOC,EAASC,CAAO,EAErCK,GAAY,MACd,cAAcf,CAAa,EAC3BgB,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,gBACf,CAAK,EACDf,EAAe,SAAW,GAC1BC,EAAY,SAAW,GAE3B,CAEA,SAASe,EAAoBC,EAAe,CAC1CnB,EAAmBmB,EAAc,CAAC,EAElC,MAAMJ,EAAM,IAAI,KAAM,EAAC,QAAO,EAC1Bf,EAAiB,QAAS,EAAGe,GAC/BE,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACf,CAAK,EACDd,EAAY,SAAW,IAEvBA,EAAY,SAAW,EAE3B,CAEA,MAAMiB,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAASF,CACX,EAEAG,EAAU,mBAAoBD,CAAO,EAErCjB,EAAY,iBAAiB,QAAS,IAAM,CAC1CA,EAAY,SAAW,GACvBD,EAAe,SAAW,GAE1BD,EAAgB,YAAYa,EAAgB,GAAI,CAClD,CAAC"}